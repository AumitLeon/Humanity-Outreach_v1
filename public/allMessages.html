
<html>
  <head>
    <title>All Messages</title>
    <style>
   /* body { font-family: Helvetica, Arial, sans-serif; }
    div { width: 800px; height: 400px; margin: 40px auto; padding: 20px; border: 2px solid #5298fc; }
    h1 { font-size: 30px; margin: 0; }
    p { margin: 40px 0; }
    em { font-family: monospace; }
    a { color: #5298fc; text-decoration: none; }*/
    </style>
      <script src="/Users/aumitleon/fleek/ParseTest/CloudTest/cloud/main.js"> </script>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <script src="http://www.parsecdn.com/js/parse-1.6.7.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
   <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->

    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <!-- <script src="https://urIJ5UoMthoDlBkkvIPfan77uqxRxzKPlCEnO4E8:javascript-key=7Pb0K4gf5zIoqNbzaorZfB8Voxq7WTWYwkBa36IK@api.parse.com/1/functions/addSubs"> </script>-->
  </head>
  <body>
  <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Humanity Outreach</a>
    </div>
    <div>
      <ul class="nav navbar-nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li class="active"><a href="allMessages.html">Messages</a></li> 
        <li><a href="contact.html">Contact</a></li>
        <li><a href="blog.html">Blog</a></li> 
        <li><a href="https://github.com/AumitLeon" target="_blank">Code</a></li>
      </ul>
    </div>
  </div>
</nav>
<br>
<br>
<br>
    <!--<div>
      <div class="elegant-aero-so" id="lol">
        <h1 class="elegant-aero-so"><center>All Messages</center></h1>
        <hr>
      </div>
      <ul id="lists-posts" class="elegant-aero-lol">
      </ul>
      <div id="mmn"> </div>
      <br>-->

      <div class="col-sm-2 sidenav">
  </div>
    <div class="col-sm-8 text-left"> 
          <div id="lists-posts" class="elegant-aero"> <!--<ul id="lists-posts" class="elegant-aero"></ul>-->
          </div> 
         
        <br>
        <div id="mmn"> </div>
        <br>
        <div class="elegant-aero">
      <p><center>All Rights Reserved | <a href="privacy.html">Privacy<a><center></p>
    </div><br>
    </div>
    <div class="col-sm-2 sidenav">
      <!--<div class="well">
        <p>ADS</p>
      </div>
      <div class="well">
        <p>ADS</p>-->





</div>

      </div>
    </div>
  </div>
</div>

      <script type="text/javascript">
        Parse.initialize("urIJ5UoMthoDlBkkvIPfan77uqxRxzKPlCEnO4E8", "7Pb0K4gf5zIoqNbzaorZfB8Voxq7WTWYwkBa36IK");

        Posts = Parse.Object.extend("Posts");    
        function getPosts() {
          var query = new Parse.Query(Posts);
          query.descending("createdAt");
          query.find({
          success: function(results) {
            var output = "";
            for (var i in results) {
              //for (var i = 0; i < 5; i++) {
              var pseudonym = results[i].get("Pseudonym");
              joke = results[i].get("Message");
              var likes = results[i].get("Likes");
              var id = results[i].id
    
              
                    if (i==0)
                  {
                    output += "<a><span id='leon'><center><h1 id='lolol'>Most Popular Messages</h1></center></span></a>";
                    //output += "<button id='clickme'></button>"
                    output += "<div id='mmk'>";
                  }
                  output += "<h4 id='zxc' data-id='"+id+"'>"+pseudonym+"</h4><form method='POST'><input id='hidden-like' type='hidden' value='f'>";
                  output += "<p><i>"+joke+"</i><br><br><input data-id='"+id+"' class='button-link' id='submit-like' type='submit' value='Like' onclick='updateLikes(this)'/>"+likes+" likes</p>";
                  output += "</form><hr></div>";
                }
              
                $("#lists-posts").html(output);
          },
          error: function(error){
          console.log("Query Error:"+error.message);
          }
          });
        }

        getPosts();

        function updateLikes(identifier){
          var id = identifier.getAttribute("data-id");
          var querylol = new Parse.Query(Posts);
          querylol.equalTo("objectId", id);
          querylol.first({
            success: function(object) {
              object.increment("Likes");
              object.save();
            },
            error: function(error) {
              alert("Error: " + error.code + " " + error.message);
            }   
          });
          event.preventDefault();
          alert("Thanks for the like!");
          //Reload the page.
          location.reload(true);
        }

        /*function post(){
          Posts.set("Message", )
        }*/
      </script>
    </div>
  </body>
</html>
