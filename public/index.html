
<html>
  <head>
    <title>Humanity Outreach</title>

    <link rel="image_src" href="logo.png"/>
    <meta name="description" content ="Delivering humanitarian support to those in need. Show your support today with a simple message!"/>
    <script src="/Users/aumitleon/fleek/ParseTest/CloudTest/cloud/main.js"> </script>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <script src="http://www.parsecdn.com/js/parse-1.6.7.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>


    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <!-- <script src="https://urIJ5UoMthoDlBkkvIPfan77uqxRxzKPlCEnO4E8:javascript-key=7Pb0K4gf5zIoqNbzaorZfB8Voxq7WTWYwkBa36IK@api.parse.com/1/functions/addSubs"> </script>-->
</head>
<body>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Humanity Outreach</a>
      </div>
      <div>
        <ul class="nav navbar-nav">
          <li class="active"><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="allMessages.html">Messages</a></li> 
          <li><a href="contact.html">Contact</a></li> 
          <li><a href="blog.html">Blog</a></li> 
          <li><a href="https://github.com/AumitLeon" target="_blank">Code</a></li>
        </ul>
      </div>
    </div>
  </nav>
    <br>
    <br>
    <br>
  <div class="col-sm-2 sidenav">
  </div>
  <div class="col-sm-8 text-left"> 
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
      </ol>

      <!-- Wrapper for slides -->
      <div class="carousel-inner" role="listbox">

        <div class="item active">
          <img src="africa.jpg" alt="Chania" width="460" height="345">
          <div class="carousel-caption">
            <h3>Africa</h3>
            <p>Poverty is rampant in many parts of Africa, leaving many without clean water and basic necessities for a humane standard of living. </p>
          </div>
        </div>

        <div class="item">
          <img src="paris.jpg" alt="Chania" width="460" height="345">
          <div class="carousel-caption">
            <h3>Paris</h3>
            <p>After the recent terrosist attacks in Paris, Paraisians stand in unison against the hate that fueled and inspired these heinous acts.</p>
          </div>
        </div>
      
        <div class="item">
          <img src="palestine.jpg" alt="Flower" width="460" height="345">
          <div class="carousel-caption">
            <h3>Palestine</h3>
            <p>Palestinians have been subjected to war, poverty, and destruction.</p>
          </div>
        </div>

        <div class="item">
          <img src="brazil.jpg" alt="Flower" width="460" height="345">
          <div class="carousel-caption">
            <h3>Brazil</h3>
            <p>Many cities in Brazil are home to over crowded favelas where poverty, disease, and hopelessness are ubiquitous.</p>
          </div>
        </div>
    
      </div>

      <!-- Left and right controls -->
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <br>
  <div class="elegant-aero"><h1 id="lolol">Welcome</h1>
    <p class=><i><b>A brief note from the founder: </b></i><br><br>
      When I first had the inklings of the idea that would ultimately manifest itself as this site, I envisioned an online community that could come together and use its massive reach (hence the name of this initiative) to bring support, comfort, love, assistance, and humanity to people in difficult and unfavorable circumstances. A few kinds words, a personal anecdote, some valuable advice -- anything that can help us uplift people is all that this site intends to collect. 
      <br><br>
      Messages will be monitered but not censored (except in the case where they are particularly malicious and direclty contradict the <a href="about.html" target="_blank">mission</a>). I ask that you be thoughtful in both your remarks and comments, because ideas are like pebbles in the water -- we can never know how far those ripples will reach. 
      <br><br>
      This is not a perfect initiative and is entiely a work in progress (I am always open to people reaching out to <a href="about.html" target="_blank">get involved</a>). If coming to this website and reading some of these messages allows my mission to resonate with you in some way, then I consider this endeavor to be a resounding success. I believe that inspiring even a single individual or touching a single life is enough to change the world in incredibly profound ways. 
      <br><br>
      Please take some time to explore the site and pick it apart -- since this projcet is in its early stages, any and all feedback is appreciated. If you have any ideas as to how to improve this site, please feel free to <a href="contact.html" target="_black">reach out.</a>
      <br><br>
      <b>Warmest Regards,<br>Aumit Leon</b>
    </p>
  </div>
    <br>
    <!--<form id="post-form" action="https://urIJ5UoMthoDlBkkvIPfan77uqxRxzKPlCEnO4E8:javascript-key=7Pb0K4gf5zIoqNbzaorZfB8Voxq7WTWYwkBa36IK@api.parse.com/1/functions/addPosts" method="POST" class="elegant-aero"> -->
          <form class="elegant-aero" id="post-form" method="POST">
      <a><span id="leo"><h1 id="lolol"><center>Share your message with the world</center></h1></span></a>
      </h1>
          <div id="haha">
                    <span>Please fill all the texts in the fields.</span>
                    <br>
          <label>
            <span>Pseudonym: </span>
            <input id="name" type="text" name="name" placeholder="Pseudonym" />
          </label>
          <label>
            <span>Message :</span>
            <textarea id="message" name="message" placeholder="Your Message"></textarea>
          </label>   
          <label>
            <span>&nbsp;</span> 
            <input type="submit" class="button" value="submit" onclick="addPost()"/> 
          </label>    
          </form>
          </div>
      <div id="lists-posts" class="elegant-aero"> <!--<ul id="lists-posts" class="elegant-aero"></ul>-->
      </div> 
      <br>
        <div id="mmn"> </div>
      <br>
      <div class="elegant-aero">
        <p><center>All Rights Reserved | <a href="privacy.html">Privacy</a></center></p>
      </div><br>
        </div>
  <div class="col-sm-2 sidenav">    
  </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    Parse.initialize("urIJ5UoMthoDlBkkvIPfan77uqxRxzKPlCEnO4E8", "7Pb0K4gf5zIoqNbzaorZfB8Voxq7WTWYwkBa36IK");

    Posts = Parse.Object.extend("Posts");    
    function getPosts() {
      var query = new Parse.Query(Posts);
      query.descending("Likes");
      query.find({
     success: function(results) {
      var output = "";
              //for (var i in results) {
      for (var i = 0; i < 5; i++) {
        var pseudonym = results[i].get("Pseudonym");
        joke = results[i].get("Message");
        var likes = results[i].get("Likes");
        var id = results[i].id

                 /* WORKS
                 if (i==0)
                  {
                    output += "<center><h1 id='lolol'>Most Popular Messages</h1></center>";
                  }
                  output += "<li><div id='slike' data-id='w'>";
                  output += "<h4 id='zxc' data-id='"+id+"'>"+pseudonym+"</h4><form method='POST'><input id='hidden-like' type='hidden' value='f'>";
                  output += "<p><i>"+joke+"</i><hr style='height:0pt; visibility:hidden;'/><input data-id='"+id+"' class='button-link' id='submit-like' type='submit' value='Like' onclick='updateLikes(this)'/>"+likes+" likes</p>";
                  output += "</form></div></li>";
                  output += "<hr>";
                  if (i == 4)
                  {
                    output += "<center><a href='allMessages.html'>See all messages...</a></center>"
                  }*/


        if (i==0)
        {
          output += "<a><span id='leon'><center><h1 id='lolol'>Most Popular Messages</h1></center></span></a>";
                    //output += "<button id='clickme'></button>"
          output += "<div id='mmk'>";
        }
        output += "<h4 id='zxc' data-id='"+id+"'>"+pseudonym+"</h4><form method='POST'><input id='hidden-like' type='hidden' value='f'>";
        output += "<p><i>"+joke+"</i><br><br><input data-id='"+id+"' class='button-link' id='submit-like' type='submit' value='Like' onclick='updateLikes(this)'/>"+likes+" likes</p>";
        output += "</form><hr>";
                  /*output += "<hr>";*/
        if (i == 4)
          {
            output += "<center><a href='allMessages.html'>See all messages...</a></center>";
            output += "</div>";
           }
      }
              
      $("#lists-posts").html(output);

              /*$( "#leon" ).click(function() {
                   $( "#mmk" ).slideToggle( "slow" );
              });*/

      $(function(){
        $("#mmk").hide();
        $("#leon").click(function(){
          $( "#mmk" ).slideToggle( "slow" );
        });
      });

      $(function(){
        $("#haha").hide();
        $("#leo").click(function(){
          $( "#haha" ).slideToggle( "slow" );
        });
      });
    },
      error: function(error){
        console.log("Query Error:"+error.message);
      }
    });
  }

  getPosts();     

  function toggle_visibility(id) {
    var e = document.getElementById(id);
      if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
  }

  function updateLikes(identifier){
    var id = identifier.getAttribute("data-id");
    var querylol = new Parse.Query(Posts);
    querylol.equalTo("objectId", id);
    querylol.first({
      success: function(object) {
        object.increment("Likes");
        object.save();
      },
      error: function(error) {
        alert("Error: " + error.code + " " + error.message);
      }   
    });
    event.preventDefault();
      alert("Thanks for the like!");
      //Reload the page.
      location.reload(true);
    }

/*Debug this function. Data saved to backend but for whatever reason error, xHtml request failed comes up.*/
    function addPost(){
      var name = document.getElementById("name").value;
      var post = document.getElementById("message").value;
      var posts = new Posts();

      posts.set("Pseudonym", name);
      posts.set("Likes", 0);
      posts.set("Message", post);

      posts.save(null, {
        success: function(posts) {
          // Execute any logic that should take place after the object is saved.
          //console.log('New object created with objectId: ' + contacts.id);
          alert("Thank you for posting a message!");
        },
        error: function(posts, error) {
          // Execute any logic that should take place if the save fails.
          // error is a Parse.Error with an error code and message.
        alert('Failed to create new object, with error code: ' + error.message);
   
        }
      });
      event.preventDefault();
    }


      </script>
    </div>
  </body>
</html>

